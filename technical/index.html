<!doctype html>
  <!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html> <!--<![endif]-->

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Overview - Guide | OpenEnergyMonitor</title>
    <meta name="author" content="Glyn Hudson">
    <meta name="description" content="dev1">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="http://guide.openenergymonitor.org/technical/">

    <meta property="fb:app_id" content="xxxxxxxxxxxxxxx">
    <meta property="og:title" content="Overview">
    <meta property="og:site_name" content="Guide | OpenEnergyMonitor">
    <meta property="og:url" content="http://guide.openenergymonitor.org/technical/">
    <meta property="og:type" content="website">
    <meta property="og:description" content="dev1">
    <meta property="og:image" content="https://guide.openenergymonitor.org/images/favicon-192x192.png">

    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@openenergymon">
    
    <meta name="twitter:title" content="Overview">
    <meta name="twitter:description" content="dev1">
    <meta name="twitter:image" content="https://guide.openenergymonitor.org/images/favicon-192x192.png">

    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet">
    <link href="/atom.xml" rel="alternate" title="Guide | OpenEnergyMonitor" type="application/atom+xml">
    <link rel='shortcut icon' href='/images/favicon.ico' />
    <link rel='icon' type='image/png' href='/images/favicon-192x192.png' sizes='192x192' />

    <link rel="shortcut icon" href="/favicon.ico">
    <link rel="icon" sizes="16x16 32x32 64x64" href="/favicon.ico">
    <link rel="icon" type="image/png" sizes="196x196" href="/images/favicon-192.png">
    <link rel="icon" type="image/png" sizes="160x160" href="/images/favicon-160.png">
    <link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96.png">
    <link rel="icon" type="image/png" sizes="64x64" href="/images/favicon-64.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16.png">
    <link rel="apple-touch-icon" href="/images/favicon-57.png">
    <link rel="apple-touch-icon" sizes="114x114" href="/images/favicon-114.png">
    <link rel="apple-touch-icon" sizes="72x72" href="/images/favicon-72.png">
    <link rel="apple-touch-icon" sizes="144x144" href="/images/favicon-144.png">
    <link rel="apple-touch-icon" sizes="60x60" href="/images/favicon-60.png">
    <link rel="apple-touch-icon" sizes="120x120" href="/images/favicon-120.png">
    <link rel="apple-touch-icon" sizes="76x76" href="/images/favicon-76.png">
    <link rel="apple-touch-icon" sizes="152x152" href="/images/favicon-152.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon-180.png">
    <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">
    <meta name="msapplication-TileColor" content="#FFFFFF">
    <meta name="msapplication-TileImage" content="/images/favicon-144.png">
    <meta name="msapplication-config" content="/images/browserconfig.xml">
    
    <script>
    src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.2/jquery.min.js"></script>
<script>
$(document).ready(function(){
    $("button").click(function(){
        $("p").toggle();
    });
});
</script>

    
   
     <!--<link href='https://fonts.googleapis.com/css?family=Raleway:400,400italic,700' rel='stylesheet' type='text/css' -->

<style>

.burgerbar {
    position: fixed;
    top: 0;
    right: 100px;
    z-index: 1;
}

.sidenav {
    height: 100%;
    width: 0;
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    background-color: #777;
    overflow-x: hidden;
    transition: 0.5s;
    padding-top: 60px;
-moz-box-shadow:    3px 3px 8px 2px #000000;
  -webkit-box-shadow: 3px 3px 8px 2px #000000;
  box-shadow:         0px 0px 20px 0px #000000;}

.sidenav a {
    padding: 8px 8px 8px 32px;
    text-decoration: none;
    font-size: 25px;
    color: #ffffff;
    display: block;
    transition: 0.3s
}

.sidenav span {
    margin-right: -24px;
}

.sidenav span:after {
    font-family: "FontAwesome";
    content:"\f00d";
}

.closebtn {
    position: absolute;
    top: 0;
    right: 25px;
    font-size: 36px !important;
    margin-left: 50px;
}

#main {
    transition: margin-right .5s;
}

@media screen and (max-height: 450px) {
  .sidenav {padding-top: 15px;}
  .sidenav a {font-size: 18px;}
}

button.accordion {
    background-color: #777;
    width: 100%;
    color: #ffffff;
    cursor: pointer;
    padding: 18px;
    border: none;
    text-align: left;
    font-weight: bold;
    outline: none;
    font-size: 18px;
    border-bottom: 1px solid white;
}

button.accordion:after {
    font-family: "FontAwesome";
    content: '\f067';
    font-size: 16px;
    color: #ffffff;
    float: right;
    margin-left: 5px;
}

button.accordion.active:after {
    content: "\f068";
}

div.panel {
    width: 100%;
    background-color: white;
    max-height: 0;
    overflow: hidden;
    transition: 0.6s ease-in-out;
}

div.panel a {
    display: inline-block;
    font-size: 18px;
    color: #777;
    width: 100%;
    background-color: #ffffff;
    padding-left: 18px;
    padding-bottom: 9px;
    padding-top: 9px;
    transition: none;
}

div.panel a:hover {
    background-color: #0699fa;
    color: #ffffff;
    
}

div.panel.show {
    max-height: 500px;
}
</style>




    <header>
      
 <div class="burgerbar">
  <span style="font-size:30px;cursor:pointer" onclick="openNav()">☰</span>
 </div>
    </header>

<div id="mySidenav" class="sidenav">
  <a href="javascript:void(0)" class="closebtn" onclick="closeNav()"><span></span></a>

<button class="accordion" style="border-top:1px solid white">Set Up</button>
<div class="panel">
  
<a href="/setup/">Hardware</a>
<a href="/setup/">Connect</a>
<a href="/setup/install/">Install</a>
<a href="/setup/local/">Log Locally</a>
<a href="/setup/remote/">Log Remotely</a>
<a href="/setup/dashboards/">Dashboards</a>
<a href="/setup/emontx/">Add Energy Nodes</a>
<a href="/setup/emonth/">Add Temperature Nodes</a>
<a href="/setup/import/">Import / Backup</a>
<a href="/setup/troubleshooting/">Troubleshooting</a>


</div>

<button class="accordion">Emoncms</button>
<div class="panel">
  
<a href="/setup/">Hardware</a>
<a href="/setup/">Connect</a>
<a href="/setup/install/">Install</a>
<a href="/setup/local/">Log Locally</a>
<a href="/setup/remote/">Log Remotely</a>
<a href="/setup/dashboards/">Dashboards</a>
<a href="/setup/emontx/">Add Energy Nodes</a>
<a href="/setup/emonth/">Add Temperature Nodes</a>
<a href="/setup/import/">Import / Backup</a>
<a href="/setup/troubleshooting/">Troubleshooting</a>


</div><button class="accordion">Applications</button>
<div class="panel">
  
<a href="/setup/">Hardware</a>
<a href="/setup/">Connect</a>
<a href="/setup/install/">Install</a>
<a href="/setup/local/">Log Locally</a>
<a href="/setup/remote/">Log Remotely</a>
<a href="/setup/dashboards/">Dashboards</a>
<a href="/setup/emontx/">Add Energy Nodes</a>
<a href="/setup/emonth/">Add Temperature Nodes</a>
<a href="/setup/import/">Import / Backup</a>
<a href="/setup/troubleshooting/">Troubleshooting</a>


</div>

<button class="accordion">Integrations</button>
<div class="panel">
  
<a href="/setup/">Hardware</a>
<a href="/setup/">Connect</a>
<a href="/setup/install/">Install</a>
<a href="/setup/local/">Log Locally</a>
<a href="/setup/remote/">Log Remotely</a>
<a href="/setup/dashboards/">Dashboards</a>
<a href="/setup/emontx/">Add Energy Nodes</a>
<a href="/setup/emonth/">Add Temperature Nodes</a>
<a href="/setup/import/">Import / Backup</a>
<a href="/setup/troubleshooting/">Troubleshooting</a>


</div>

<button class="accordion">Technical</button>
<div class="panel">
  
<a href="/setup/">Hardware</a>
<a href="/setup/">Connect</a>
<a href="/setup/install/">Install</a>
<a href="/setup/local/">Log Locally</a>
<a href="/setup/remote/">Log Remotely</a>
<a href="/setup/dashboards/">Dashboards</a>
<a href="/setup/emontx/">Add Energy Nodes</a>
<a href="/setup/emonth/">Add Temperature Nodes</a>
<a href="/setup/import/">Import / Backup</a>
<a href="/setup/troubleshooting/">Troubleshooting</a>


</div><button class="accordion">Support</button>
<div class="panel">
  
<a href="/setup/">Hardware</a>
<a href="/setup/">Connect</a>
<a href="/setup/install/">Install</a>
<a href="/setup/local/">Log Locally</a>
<a href="/setup/remote/">Log Remotely</a>
<a href="/setup/dashboards/">Dashboards</a>
<a href="/setup/emontx/">Add Energy Nodes</a>
<a href="/setup/emonth/">Add Temperature Nodes</a>
<a href="/setup/import/">Import / Backup</a>
<a href="/setup/troubleshooting/">Troubleshooting</a>



</div>
  
  
</div>



<div id="main">


    

    <div class="grid-wrapper">
      <div class="grid grid-center">
        
        <div class="grid__item two-thirds lap-one-whole palm-one-whole">
        

          <article class="page">
  
    

  
  <header>
    <h1 class="title indent">
      Overview
    </h1>
  </header>
  <hr class="divider">
  

  <figure><a href="https://github.com/openenergymonitor/emonpi/raw/master/docs/emonPi_System_Diagram.png">
<img src="https://github.com/openenergymonitor/emonpi/raw/master/docs/emonPi_System_Diagram.png" alt="emonPi Architecture Overview" />
<figcaption style="text-align:center;"><i>Fig.1 - emonPi Architecture Overview</i></figcaption>
</a>
</figure>
<p><br /></p>

<p>The emonPi is based on a RaspberryPi + <a href="https://wiki.openenergymonitor.org/index.php/EmonPi">emonPi Shield PCB</a>. The emonPi features a ATmega328p 8-bit microcontroller which is Arduino compatible.</p>

<figure>
<img src="https://github.com/openenergymonitor/Hardware/raw/master/emonPi/emonPi_V1_6/photo.png" alt="emonPi RaspberryPi Shield PCB" />
<figcaption style="text-align:center;"><i>emonPi RaspberryPi Shield PCB</i></figcaption>
</figure>
<p><br /></p>

<p>An <a href="http://shop.openenergymonitor.com/emonbase-web-connected-base-station/">emonBase</a> functions in much the same way as an emonPi but instead of an emonPi shield PCB it uses an <a href="http://shop.openenergymonitor.com/rfm69pi-433mhz-raspberry-pi-base-station-receiver-board/">RFM69Pi PCB</a> and has no local energy monitoring capability. The Raspberry Pi on the emonBase runs the same <a href="#emonsd-features">emonSD</a> software as the emonPi.</p>

<figure>
<img src="https://wiki.openenergymonitor.org/images/thumb/RFM69Pi_RasPi.JPG/1500px-RFM69Pi_RasPi.JPG" alt="emonBase: Raspberry Pi + RFM69Pi" />
<figcaption style="text-align:center;"><i>emonBase: Raspberry Pi + RFM69Pi</i></figcaption>
</figure>
<p><br /></p>

<hr />

<h2 id="a-classtitle-link-namehardware-overview-hrefhardware-overviewa-hardware-overview"><a class="title-link" name="hardware-overview" href="#hardware-overview"></a> Hardware Overview</h2>

<p>As the diagram (fig.1) shows the Atmega328 microprocessor communicates with the RaspberyPi via the internal UART <code class="highlighter-rouge">(/dev/ttyAMA0</code> serial port. Data is transmitted over serial using the <a href="http://jeelabs.org/2011/06/09/rf12-packet-format-and-design/">JeeLib packet format</a>. The ATmega328 on the emonPi / RFM69Pi run a modifed version of <a href="http://jeelabs.net/projects/jeelib/wiki/RF12demo">JeeLabs RFM12Demo Sketch</a>.</p>

<h3 id="inside-the-emonpi">Inside the emonPi</h3>

<div class="videoWrapper">
<iframe width="560" height="315" src="https://www.youtube.com/embed/lc2LzCZnySo" frameborder="0" allowfullscreen=""></iframe>
</div>

<p><strong>More technical info See <a href="/technical/resources#emonpi">emonPi Resources</a></strong></p>

<h3 id="a-classtitle-link-namerf-hrefrfa-rf"><a class="title-link" name="rf" href="#rf"></a> RF</h3>

<p>The emonPi / RFM69Pi uses the HopeRF RFM69CW RF module to recieve data from other wireless nodes (emonTx, emonTH etc) using 433Mhz. Each RF node is required to be on the same network group (default 210) and have an unique node ID. Data is transmitted over serial using the <a href="http://jeelabs.org/2011/06/09/rf12-packet-format-and-design/">JeeLib packet format</a>. EmonHub python service on the Raspberry Pi requires a corresponding node decoder entry in emonhub config for each RF node. See <a href="#emonhub">emonHub in section below</a>.</p>

<p><strong>See <a href="/technical/resources/fundamentals">Fundamental Building block Resources</a></strong></p>

<h3 id="a-classtitle-link-nameenergy-monitoring-hrefenergy-monitoringa-energy-monitoring"><a class="title-link" name="energy-monitoring" href="#energy-monitoring"></a> Energy Monitoring</h3>

<p>Energy monitoring on the emonPi and emonTx is acheved using <a href="https://github.com/openenergymonitor/emonlib">emonLib</a> discrete sampling and the ATmega328’s 10-bit ADC. By default samples are taken once every 5 seconds.</p>

<p><strong>See <a href="/technical/resources#fundamentals">Fundamental Building block Resources</a></strong></p>

<h3 id="a-classtitle-link-namepulse-counting-hrefpulse-countinga-pulse-counting"><a class="title-link" name="pulse-counting" href="#pulse-counting"></a> Pulse Counting</h3>

<p>Pulse couting on the emonPi and emonTx uses ATmega328’s second hardware interrupt IRQ1. The first hardware interrupt IRQ0 is used by the RFM69CW. Only one pulse couter input is possible per emonTx/emonPi.</p>

<p><strong>See <a href="/technical/resources#optical-pulse-counter">Optical Pulse Sensor Resources</a></strong></p>

<h2 id="a-classtitle-link-namesoftware-overview-hrefsoftware-overviewa-software-overview"><a class="title-link" name="software-overview" href="#software-overview"></a> Software Overview</h2>

<p>By default the Raspberry Pi runs a modifed version of Debian <a href="https://www.raspberrypi.org/downloads/raspbian/">Raspbian Jessie Lite</a>. A pre-build SD card image (<strong>emonSD</strong>) is available to <a href="https://github.com/openenergymonitor/emonpi/Docs/emonSD-pre-built-SD-card-Download-&amp;-Change-Log">purchase or download</a>) which has everything already set up.</p>

<h3 id="a-classtitle-link-nameemonsd-features-hrefemonsd-featuresa-emonsd-features"><a class="title-link" name="emonsd-features" href="#emonsd-features"></a> emonSD features</h3>

<ul>
  <li>Read-only root file-system for long SD card lifespan</li>
  <li>emonPi LCD &amp; Update service</li>
  <li>Emoncms with low-write optimisations</li>
  <li>Mosquitto MQTT server</li>
  <li>emonHub service</li>
  <li>Node-RED</li>
  <li>OpenHAB</li>
  <li>LightWave RF MQTT OOK</li>
</ul>

<p><strong>See <a href="/technical/resources#emonsd">emonSD Resources</a></strong></p>

<h3 id="a-classtitle-link-nameemonhub-hrefemonhuba-emonhub"><a class="title-link" name="emonhub" href="#emonhub"></a> emonHub</h3>

<p>emonHub (emonpi variant) is pre-installed on emonSD. EmonHub is a pythion service wich receives the data from the emonPi via serial (in JeeLabs packet) format. emonHub decodes the data and publishes it to the emonPi’s localhost Mosquitto MQTT server and (<a href="/setup/remote">if configured</a>) remotely to <a href="https://emoncms.org">Emoncms.org</a>.</p>

<p>Corresponding EmonHub node-decoder entriess must be present in emonhub config for each wireless RF node e.g. emonTx, emonTH. See confguring emonhub in the resources:</p>

<p><strong>See <a href="/technical/resources#emonhub">emonHub Resources</a></strong></p>

<hr />

<h3 id="see-technical--resourcestechnicalresources-for-further-info-and-support-">See <a href="/technical/resources">Technical &gt; Resources</a> for further info and support &gt;</h3>


</article>


        </div>

        
        <aside id="sidebar" class="grid__item one-third lap-one-whole palm-one-whole">
          <div class="grid">

  

  
    <section class="aside-module grid__item one-whole lap-one-half">
  <div class='edit-github'><a href='https://github.com/openenergymonitor/guide/tree/master/source/technical/index.markdown'>Edit on GitHub</a></div>
<div class='edit-github'><a href='http://prose.io/#openenergymonitor/guide/edit/master/source/technical/index.markdown'>Edit on GitHub Prose</a></div>


  <div class='section'>
    <h1 class="title delta">Site Map</h1>
    <ul class='divided sidebar-menu'>
      <li>
          <b>Setup</b>
        <ul>
          <li><a  href='/setup/'>Hardware </a></li>
          <li><a  href='/setup/connect/'>Connect </a></li>
          <li><a  href='/setup/install/'>Install </a></li>
          <li><a  href='/setup/local/'>Log Locally </a></li>
          <li><a  href='/setup/remote/'>Log Remotely </a></li>
          <li><a  href='/setup/dashboards/'>Dashboards </a></li>
          <li><a  href='/setup/emontx/'>Add Energy Nodes </a></li>
          <li><a  href='/setup/emonth/'>Add Temperature Nodes </a></li>
          <li><a  href='/setup/import/'>Import / Backup </a></li>
          <li><a  href='/setup/troubleshooting/'>Troubleshooting </a></li>
        </ul>
        <li>
          <b>Emoncms</b>
          <ul>
          <li><a  href='/setup/daily-kwh'>Daily kWh</a></li>
          <li><a  href='/setup/daily-averages'>Daily Averages </a></li>
          <li><a  href='/setup/export-csv'>Exporting CSV </a></li>
          <li><a  href='/setup/histograms'>Histograms </a></li>
        </ul>


      </li>

      <li>
         <b>Applications</b>
        <ul>
         <li><a  href='/applications/home-energy/'>Home Energy </a></li>
         <li><a  href='/applications/solar-pv/'>Solar PV </a></li>
         <li><a  href='http://heatpumpmonitor.org/'>Heatpump <i class="icon-external-link"></i> </a></li>
        </ul>
      </li>

      <li>
         <b>Integrations</b>
        <ul>
         <li><a  href='/integrations/nodered/'>Node-RED </a></li>
         <li><a  href='/integrations/openhab/'>OpenHAB </a></li>
         <li><a  href='/integrations/mqtt-relay/'>Control Relay </a></li>
         <li><a  href='/integrations/lightwaverf/'>LightWave RF Control </a></li>
        </ul>

      <li>
        <b>Technical</b>
       <ul>
        <li><a class='active' href='/technical/'>Overview </a></li>
        <li><a  href='/technical/specifications/'>Specifications </a></li>
        <li><a  href='/technical/credentials/'>Service Credentials </a></li>
        <li><a  href='/technical/api/'>Emoncms API </a></li>
        <li><a  href='/technical/mqtt/'>MQTT </a></li>
        <li><a  href='/technical/resources/'>Resources </a></li>
       </ul>
      </li>
      
      <li>
     <b>Support</b>
        <ul>
         <li><a  href='https://community.openenergymonitor.org/latest'>Community Forum <i class="icon-external-link"></i> </a>
         <li><a  href='/help/'>Contact </a></li>
        </ul>
      </li>
      
      
    </div>
<gcse:search></gcse:search>
</section>
    <section class="aside-module grid__item one-whole lap-one-half">
  <h1 class="title delta"<li><a href='https://openenergymonitor.org' target="_blank">OpenEnergyMonitor <i class="icon-external-link"></i></h1>
  <ul class="divided">
    <li>
      A project to develop <a href='https://openenergymonitor.org/emon/opensustech'>open-source tools</a> to help us relate to our use of energy, our energy systems and the challenge of <a href='https://openenergymonitor.org/emon/sustainable-energy'>sustainable energy</a>.
    </li>
    
  </ul>
  <p>
  <h1 class="title delta"<li><a href='https://emoncms.org' target="_blank">Emoncms <i class="icon-external-link"></i></a></li></h1>
  <ul class="divided">
    <li>
      Emoncms is a powerful <a href='https://github.com/emoncms'>open-source</a> web-app for processing, logging and visualising energy, temperature and other environmental data.
    </li>
  </ul>
</section>
  

    
</div>
        </aside>
        
      </div>
    </div>

    <footer>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <style>


div.searchtool {
  position: relative;
  display: inline-block;
  top: -6px;
}

input[type=text] {
  border: 3px solid #0699fa;
}

fieldset {
  border: 0;
}

</style>
<div class="copyright">

  <a rel="me" href='https://twitter.com/openenergymon'><i class="icon-twitter"></i></a>
  <a rel="me" href='https://github.com/openenergymonitor/guide'><i class="icon-github"></i></a>
  <a rel="me" href='http://blog.openenergymonitor.org'><i class="icon-rss"></i></a>

  <div class="credit">
    Website powered by <a href='http://jekyllrb.com/'>Jekyll</a> and <a href='https://github.com/coogie/oscailte'>Oscalite</a>.<br />
    Hosted by <a href='https://pages.github.com/'>GitHub</a> and served by <a href='https://cloudflare.com'>CloudFlare</a>.
  </div>

<div class="searchtool">


<form action="https://encrypted.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:guide.openenergymonitor.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search..." />
  </fieldset>
</form>


</div>
</div>
    </div>
  </div>
</div>
    </footer>

    <!--[if lt IE 7]>
      <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->

    <script>
  var _gaq=[['_setAccount','UA-10321170-5'],['_trackPageview']];
  (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
  g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
  s.parentNode.insertBefore(g,s)}(document,'script'));
</script>



<script>
  $(document).ready(function(){
    if (!window.jXHR){
      var jxhr = document.createElement('script');
      jxhr.type = 'text/javascript';
      jxhr.src = '/javascripts/libs/jXHR.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(jxhr, s);
    }

    github.showRepos({
      user: 'openenergymonitor',
      count: 5,
      skip_forks: true,
      target: '#gh_repos'
    });
  });
</script>
<script src="/javascripts/github.js"></script>




</div>
</div>
</div>


<script>
function openNav() {
    document.getElementById("mySidenav").style.width = "250px";
    document.getElementById("main").style.marginRight = "250px";
}

function closeNav() {
    document.getElementById("mySidenav").style.width = "0";
    document.getElementById("main").style.marginRight= "0";
}

var acc = document.getElementsByClassName("accordion");
var i;

for (i = 0; i < acc.length; i++) {
    acc[i].onclick = function(){
        this.classList.toggle("active");
        this.nextElementSibling.classList.toggle("show");
  }
}

</script>

</html>